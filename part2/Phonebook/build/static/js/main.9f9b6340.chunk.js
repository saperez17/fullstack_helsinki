(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{42:function(n,e,t){},44:function(n,e,t){"use strict";t.r(e);var c=t(3),r=t(18),o=t.n(r),u=t(19),a=t(8),i=t(1),l=t(6),s=t(4),f=t.n(s),b="http://localhost:3001/api/persons",j=function(){return f.a.get(b).then((function(n){return n.data}))},d=function(n){return f.a.post(b,n).then((function(n){return n.data}))},h=function(n,e){return f.a.put("".concat(b,"/").concat(n),e).then((function(n){return n.data}))},m=function(n){return f.a.delete("".concat(b,"/").concat(n)).then((function(n){return n.data}))},O=(t(42),t(0)),p=function(n){var e=n.onChangeSearch,t=n.filterInputValue;return Object(O.jsxs)("div",{children:["filter shown with"," ",Object(O.jsx)("input",{onChange:e,value:t})]})},v=function(n){var e=n.formSubmitHandler,t=n.inputHandler,c=n.newContact;return Object(O.jsxs)("form",{onSubmit:e,children:[Object(O.jsxs)("div",{children:["name:"," ",Object(O.jsx)("input",{name:"name",onChange:t,value:c.name})]}),Object(O.jsxs)("div",{children:["number:"," ",Object(O.jsx)("input",{name:"number",onChange:t,value:c.number})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{type:"submit",children:"add"})})]})},x=function(n){var e=n.name,t=n.number,c=n.id,r=n.deleteClickHandler;return Object(O.jsxs)("div",{children:[e," ",t,Object(O.jsx)("button",{onClick:r,children:"delete"})]},c)},w=function(n){var e=n.persons,t=n.filter,c=n.setPersons,r=e.filter((function(n){return n.name.toLowerCase().startsWith(t.toLowerCase())}));return Object(O.jsx)("div",{children:r.map((function(n,t){return Object(O.jsx)(x,{name:n.name,number:n.number,id:n.id,deleteClickHandler:function(){return function(n){var t=e.filter((function(e){return e.id===n}));window.confirm("Are you sure you want to delete ".concat(t.name))&&m(n).then((function(t){c(e.filter((function(e){return e.id!==n})))})).catch((function(n){console.log("error here")}))}(n.id)}})}))})},g=function(n){var e=n.notification;return null===e.content?null:Object(O.jsx)("div",{className:1===e.type?"notificationSuccess":"notificationError",children:e.content})},y=function(){var n=Object(c.useState)([]),e=Object(l.a)(n,2),t=e[0],r=e[1],o=Object(c.useState)({name:"",number:""}),s=Object(l.a)(o,2),f=s[0],b=s[1],m=Object(c.useState)(""),x=Object(l.a)(m,2),y=x[0],C=x[1],S=Object(c.useState)({content:null,type:null}),k=Object(l.a)(S,2),H=k[0],I=k[1];Object(c.useEffect)((function(){j().then((function(n){r(n)})).catch((function(n){console.log("Something went wrong")}))}),[]);return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Phonebook"}),Object(O.jsx)(g,{notification:H}),Object(O.jsx)(p,{onChangeSearch:function(n){C(n.target.value)},filterInputValue:y}),Object(O.jsx)("h2",{children:"add a new"}),Object(O.jsx)(v,{formSubmitHandler:function(n){n.preventDefault();var e=t.find((function(n){return n.name===f.name}));e?window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))&&(e.number=f.number,h(e.id,e).then((function(n){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:"".concat(e.name," updated successfully!"),type:1})})),setTimeout((function(){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:null,type:null})}))}),5e3),b({name:"",number:""})})).catch((function(n){r(t.filter((function(n){return n.id!==e}))),I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:"Information of ".concat(e.name," has already been removed from the server."),type:0})})),setTimeout((function(){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:null,type:null})}))}),5e3)}))):d(f).then((function(n){console.log("created person",n),I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:"".concat(f.name," added successfully!"),type:1})})),setTimeout((function(){I((function(n){return Object(i.a)(Object(i.a)({},n),{},{content:null,type:null})}))}),5e3),r((function(e){return[].concat(Object(u.a)(e),[n])})),b({name:"",number:""})})).catch((function(n){console.log("error",n)}))},inputHandler:function(n){b((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(a.a)({},n.target.name,n.target.value))}))},newContact:f}),Object(O.jsx)("h2",{children:"Numbers"}),Object(O.jsx)(w,{persons:t,setPersons:r,filter:y})]})},C=document.getElementById("root");o.a.render(Object(O.jsx)(c.StrictMode,{children:Object(O.jsx)(y,{})}),C)}},[[44,1,2]]]);
//# sourceMappingURL=main.9f9b6340.chunk.js.map